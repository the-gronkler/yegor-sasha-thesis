# Developer Documentation

## Intro

This file stores technical documentation useful during development. If a PR introduces something that needs to be 'kept in mind' during development, it should also update this file

## Related Documents

- [Frontend Project Structure](./fe-project-structure.md)
- [TypeScript Guidelines](./ts-guidelines.md)
- [CSS Documentation](./css-documentation.md)

## Running with Docker

### Prerequisites

- Docker Desktop installed and running.

### Quick Start

1.  **Configure Environment**:

    ```powershell
    cp .env.example .env
    ```

2.  **Start Application**:

    ```powershell
    docker-compose up -d --build
    ```

3.  **First Run Setup**:
    If this is your first time running the project, generate the app key:

    ```powershell
    docker-compose exec app php artisan key:generate
    ```

4.  **Access**:
    - App: [https://yegor-sasha-thesis.test](https://yegor-sasha-thesis.test)
    - Database: `127.0.0.1:3306`

### Stopping

```powershell
docker-compose down
```

## Local SSL Setup (HTTPS)

We use Caddy to serve the application over HTTPS locally (`https://yegor-sasha-thesis.test`). To avoid browser security warnings, you need to trust the self-signed certificate generated by Caddy.

**Note:** You only need to do this once (unless you delete the `caddy_data` Docker volume).

### 1. Export the Certificate

Run this command in your terminal while the containers are running:

```powershell
docker cp thesis-caddy:/data/caddy/pki/authorities/local/root.crt ./caddy-root.crt
```

### 2. Install/Trust the Certificate (Windows)

1.  Double-click the `caddy-root.crt` file in your project root.
2.  Click **Install Certificate...**.
3.  Select **Current User** and click **Next**.
4.  Select **"Place all certificates in the following store"**.
5.  Click **Browse...** and select **"Trusted Root Certification Authorities"**. (Critical Step!)
6.  Click **OK**, then **Next**, then **Finish**.
7.  Confirm the security warning by clicking **Yes**.

### 3. Restart Browser

Close and reopen your browser. The site should now be secure.

## Console commands

Custom artisan commands, to use type:

```powershell
php artisan <command-name>
```

- `mfs`

  Alias for: `migrate:fresh --path=database/migrations/* --seed`. Wipes the DB, reruns all migrations in the specified folder and its subfolders, and then seeds the database.

- `ziggy:generate`

  Generates the `resources/js/ziggy.js` file. Run this whenever you add or modify named routes in `routes/web.php` to make them available in the frontend.

## Formatting

### Git Hooks (Automation)

We use **Husky** and **lint-staged** to automatically format files before they are committed.

- When you run `git commit`, only the **staged files** (the ones you added) will be formatted.
- If formatting changes are made, they are automatically added to the commit.
- This ensures that no unformatted code enters the repository.

- Theat means you dont need to run the commands below manually

### Frontend (JS/TS/CSS)

We use **Prettier** for code formatting. The configuration is located in [`.prettierrc`](../.prettierrc).

To format all frontend files, run:

```powershell
npm run format
```

### Backend (PHP)

We use **Laravel Pint** for PHP formatting. The configuration is located in [`pint.json`](../pint.json).

To format all PHP files, run:

```powershell
composer run format
```

Or the alias:

```powershell
npm run format:php
```

### Format Everything

To format both frontend and backend files in one go, run:

```powershell
npm run format:all
```
